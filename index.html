
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="">
    <title>null</title>
    <meta name="author" content="Moon Star">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"Website","@id":"https://suld2495.github.io","author":{"@type":"Person","name":"Moon Star","sameAs":["https://github.com/","https://facebook.com/"]},"name":null,"description":"개발 정리 블로그","url":"https://suld2495.github.io"}</script>
    <meta name="description" content="개발 정리 블로그">
<meta property="og:type" content="blog">
<meta property="og:title">
<meta property="og:url" content="https:&#x2F;&#x2F;suld2495.github.io&#x2F;index.html">
<meta property="og:site_name">
<meta property="og:description" content="개발 정리 블로그">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Moon Star">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/%20"
            aria-label=""
        >
            
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/%20"
                            
                            title="홈"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">홈</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="카테고리"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="태그"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="아카이브"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="검색"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://facebook.com/" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/24/es6-spread/"
                            aria-label=": 전개 연산자의 사용"
                        >
                            전개 연산자의 사용
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-24T20:29:16+09:00">
	
		    Mar 24, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/ES6/">ES6</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="전개-연산자"><a href="#전개-연산자" class="headerlink" title="전개 연산자"></a>전개 연산자</h2><p>전개 연산자는 ES6에서 추가된 문법이다. 사용 방법은 <code>...값</code>으로 사용이다. 이 문법을 사용하면, 객체 혹은 배열을 펼칠수있다. 설명만으로는 제대로 이해가 가지 않기 때문에 아래의 예제를 기억하도록 하자.</p>
<br>

<h4 id="배열에서-전개연산자-사용"><a href="#배열에서-전개연산자-사용" class="headerlink" title="배열에서 전개연산자 사용"></a>배열에서 전개연산자 사용</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(...arr); <span class="comment">// 1, 2, 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line">arr.push(...arr2;)</span><br></pre></td></tr></table></figure>

<p>위의 예제에서 arr3를 만들려면 기존에는 아래와 같은 코드를 사용해야 했다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(arr, arr2);</span><br></pre></td></tr></table></figure>

<br>

<p>함수의 매개변수로도 전달이 가능하다</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">i, j , k</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i, j, k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(...arr);</span><br></pre></td></tr></table></figure>

<br>

<h4 id="객체에서-사용하기"><a href="#객체에서-사용하기" class="headerlink" title="객체에서 사용하기"></a>객체에서 사용하기</h4><p>전개연산자를 통해서 아와 같이 새로운 객체를 생성할수 있다.이를 사용하면JSON.parse(JSON.stringify()))를 더이상 사용할 필요가 없어보인다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span> : <span class="string">'Jone'</span>, <span class="attr">age</span> : <span class="number">24</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;...obj&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj2);</span><br></pre></td></tr></table></figure>

<p>아래와 같인 특정 key의 값만 가져올수가 있다. 이때 key가 정확히 일치 할때만 가져올수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span> : <span class="string">'Jone'</span>, <span class="attr">age</span> : <span class="number">24</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; name &#125; = obj;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure>

<p>아래와 같이 작성 하면 Object.assign을 대체 할수 있다. 중복된 key를 가지고 있으면 뒤에 오는 객체의 value로 덮어 씌워진다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span> : <span class="string">'Jone'</span>, <span class="attr">age</span> : <span class="number">24</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">name</span> : <span class="string">'Jane'</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj3 = &#123; <span class="attr">school</span> : <span class="string">'high school'</span>, <span class="attr">born</span> : <span class="string">'SEOUL'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj4 = &#123;...obj, ...obj2, ...obj3, <span class="attr">born</span> : <span class="string">'ULSAN'</span> &#125;;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="나머지-연산자"><a href="#나머지-연산자" class="headerlink" title="나머지 연산자"></a>나머지 연산자</h4><p>전개 연산자와 나머지 연산자는 다른 연산자 이지만 모양이 동일하다. 나머지 연산자는 앞에 오는 변수에 값을 할당 한 뒤 남은 모든 값을 하나의 배열로 변수에 저장해준다.<br>나머지 연산자가 중간에 올수 없으며, 나머지 연산자는 항상 하나만 사용이 가능하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(head);  <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(tail);  <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>

<p>함수의 파라미터로도 사용이 가능하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b, ...c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">    <span class="built_in">console</span>.log(b)</span><br><span class="line">    <span class="built_in">console</span>.log(c)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/24/es6-spread/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/14/vuex-test-md/"
                            aria-label=": Vuex를 사용한 테스트"
                        >
                            Vuex를 사용한 테스트
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-14T11:35:32+09:00">
	
		    Mar 14, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/vue-test-utils/">vue-test-utils</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Vuex를-사용하는-컴포넌트-테스트"><a href="#Vuex를-사용하는-컴포넌트-테스트" class="headerlink" title="Vuex를 사용하는 컴포넌트 테스트"></a>Vuex를 사용하는 컴포넌트 테스트</h2><h4 id="actions를-mock-하기"><a href="#actions를-mock-하기" class="headerlink" title="actions를 mock 하기"></a>actions를 mock 하기</h4><p>아래의 컴포넌트는 vuex의 actions를 사용하는 코드이다. Vuex를 사용하는 컴포넌트를 테스트시에 주의해야 할 점은 actions가 어떻게 동작하는지는 중요하지 않다. 우리가 사용하고자 하는 action이 실제로 호출되었는지 여부만 테스트 한다.<br>action이 정확하게 동작하는지 여부는 vuex store 테스트시에 하게 된다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;text-align-center&quot;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; @input&#x3D;&quot;actionInputIfTrue&quot;&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;actionClick()&quot;&gt;Click&lt;&#x2F;button&gt;    </span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Component, Vue &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line">import &#123; mapActions &#125; from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        ...mapActions([&#39;actionClick&#39;])</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">export default class Actions extends Vue &#123;</span><br><span class="line">    actionInputIfTrue(event:any):void &#123;</span><br><span class="line">        const inputValue &#x3D; event.target.value;</span><br><span class="line">        if (inputValue &#x3D;&#x3D;&#x3D; &#39;input&#39;) &#123;</span><br><span class="line">            this.$store.dispatch(&#39;actionInput&#39;, &#123; inputValue &#125;);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount, createLocalVue, Wrapper &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> Actions <span class="keyword">from</span> <span class="string">'../Actions.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = createLocalVue();</span><br><span class="line"></span><br><span class="line">localVue.use(Vuex);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'Actions.vue'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> wrapper:Wrapper&lt;Vue&gt;;</span><br><span class="line">    <span class="keyword">let</span> actions:<span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">let</span> store:<span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line">    beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        actions = &#123;</span><br><span class="line">            actionClick: jest.fn(),</span><br><span class="line">            actionInput: jest.fn()</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">            actions,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        wrapper = shallowMount(VuexComponent, &#123; store, localVue &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    it(<span class="string">'dispatches "actionInput" when input event value is "input"'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> input = wrapper.find(<span class="string">'input'</span>);</span><br><span class="line">        input.element.value = <span class="string">'input'</span>;</span><br><span class="line">        input.trigger(<span class="string">'input'</span>);</span><br><span class="line">        expect(actions.actionInput).toHaveBeenCalled();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    it(<span class="string">'does not dispatch "actionInput" when event value is not "input"'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> input = wrapper.find(<span class="string">'input'</span>);</span><br><span class="line">        input.element.value = <span class="string">'no input'</span>;</span><br><span class="line">        input.trigger(<span class="string">'input'</span>);</span><br><span class="line">        expect(actions.actionInput).not.toHaveBeenCalled();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    it(<span class="string">'calls store action "actionClick" when button is clicked'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> button = wrapper.find(<span class="string">'button'</span>);</span><br><span class="line">        button.trigger(<span class="string">'click'</span>);</span><br><span class="line">        expect(actions.actionClick).toHaveBeenCalled();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br>

<p><code>첫번째</code> 주의해야 할 점은 테스트 시에는 localVue를 사용해야 한다는 것이다.<br><code>두번째</code> 는 actions를 jest의 mock functions를 사용하여 테스트한다. 이를 이용하면 actions를 실제로 구현하지 않아도 호출되었는지 여부를 확인 할수 있다.<br><code>세번째</code> 는 함수의 호출 여부를 확인 하는 assertion은 <code>toHaveBeenCalled</code>를 사용한다.</p>
<br>

<h4 id="getters를-mock-하기"><a href="#getters를-mock-하기" class="headerlink" title="getters를 mock 하기"></a>getters를 mock 하기</h4><p>getters도 actions와 마찬가지로 어떻게 동작하는지는 중요하지 않다. getters의 결과가 실제로 렌더링 되는지 여부만 확인 해보면 된다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;p v-if&#x3D;&quot;inputValue&quot;&gt;&#123;&#123;inputValue&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p v-if&#x3D;&quot;clicks&quot;&gt;&#123;&#123;clicks&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import &#123; mapGetters &#125; from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">    @Component(&#123;</span><br><span class="line">        computed: mapGetters([&#39;clicks&#39;, &#39;inputValue&#39;])</span><br><span class="line">    &#125;)</span><br><span class="line">    export default class Getters extends Vue &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount, createLocalVue, Wrapper &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> Getters <span class="keyword">from</span> <span class="string">'../Getters.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = createLocalVue();</span><br><span class="line"></span><br><span class="line">localVue.use(Vuex);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'Getters.vue'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> getters:<span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">let</span> store:<span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">let</span> wrapper:Wrapper&lt;Vue&gt;;</span><br><span class="line"></span><br><span class="line">    beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        getters = &#123;</span><br><span class="line">            clicks: <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">2</span>,</span><br><span class="line">            inputValue: <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'input'</span></span><br><span class="line">        &#125;;</span><br><span class="line">        store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">            getters</span><br><span class="line">        &#125;);</span><br><span class="line">        wrapper = shallowMount(VuexComponent, &#123; store, localVue &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    it(<span class="string">'Renders "store.getters.inputValue" in first p tag'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        expect(wrapper.find(<span class="string">'.input-value'</span>).text()).toBe(getters.inputValue());</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    it(<span class="string">'Renders "store.getters.clicks" in second p tag'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        expect(wrapper.findAll(<span class="string">'p'</span>).at(<span class="number">1</span>).text()).toBe(getters.clicks().toString());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br>

<p><code>첫번째</code> 는 actions와는 달리 getters는 jest의 mock functions를 사용하지 않는다. getters 객체를 작성하지만 로직은 중요하지 않는다.<br><code>두번째</code> 는 getters의 리턴 값이 렌더링되었는지 여부를 확인 하는 건 wrapper의 text 메소드를 이용한다.</p>
<br>

<h4 id="vuex의-모듈-방식-테스트하기"><a href="#vuex의-모듈-방식-테스트하기" class="headerlink" title="vuex의 모듈 방식 테스트하기"></a>vuex의 모듈 방식 테스트하기</h4><p>vuex의 모듈 방식을 활용한 테스트도 기존의 테스트랑 별 다를게 없다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;moduleActionClick()&quot;&gt;Click&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123;moduleClicks&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; Vue, Component &#125; from &#39;vue-property-decorator&#39;;</span><br><span class="line">import &#123; mapActions, mapGetters &#125; from &#39;vuex&#39;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        ...mapActions([&#39;moduleActionClick&#39;])</span><br><span class="line">    &#125;,</span><br><span class="line">    computed: mapGetters([&#39;moduleClicks&#39;])</span><br><span class="line">&#125;)</span><br><span class="line">export default class MyModuleVuex extends Vue &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount, createLocalVue, Wrapper &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> MyModuleVuex <span class="keyword">from</span> <span class="string">'../MyModuleVuex.vue'</span>;</span><br><span class="line"><span class="keyword">import</span> myModule <span class="keyword">from</span> <span class="string">'../../store/myModule'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = createLocalVue();</span><br><span class="line"></span><br><span class="line">localVue.use(Vuex);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">'MyModuleVuex'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> actions:<span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">let</span> state:<span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">let</span> store:<span class="built_in">any</span>;</span><br><span class="line">    <span class="keyword">let</span> wrapper:Wrapper&lt;Vue&gt;;</span><br><span class="line"></span><br><span class="line">    beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        actions = &#123;</span><br><span class="line">            moduleActionClick: jest.fn()</span><br><span class="line">        &#125;;</span><br><span class="line">        state = &#123;</span><br><span class="line">            clicks: <span class="number">2</span></span><br><span class="line">        &#125;;</span><br><span class="line">        store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">            modules: &#123;</span><br><span class="line">                myModule: &#123;</span><br><span class="line">                    state,</span><br><span class="line">                    actions,</span><br><span class="line">                    getters: myModule.getters</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        wrapper = shallowMount(MyModuleVuex, &#123; store, localVue &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    it(<span class="string">'calls store action "moduleActionClick" when button is clicked'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        wrapper.find(<span class="string">'button'</span>).trigger(<span class="string">'click'</span>);</span><br><span class="line">        expect(actions.moduleActionClick).toHaveBeenCalled();</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">'renders "state.clicks" in first p tag'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        expect(wrapper.find(<span class="string">'p'</span>).text()).toBe(state.clicks.toString());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br>

<h2 id="Vuex-Store-테스트하기"><a href="#Vuex-Store-테스트하기" class="headerlink" title="Vuex Store 테스트하기"></a>Vuex Store 테스트하기</h2><p>지금까지는 Vuex를 사용하는 컴포넌트에 대해서 알아보았다. 그렇기 때문에 실제 Vuex의 내부 동작과는 무관한 테스트였다. 이번에는 Vuex가 정확하게 동작하는지 여부를 테스트 하기 위한 방법이다.<br>Vuex Store 테스트는 두가지 방법이 있다. 첫번째는 getters, mutations, actions를 독립적으로 테스트 하는 것이다. 두번째는 실제 Vuex Store를 생성하는 방법이다.<br>아래는 테스트에서 사용할 mutations와 getters 코드이다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    increment(state:<span class="built_in">any</span>) &#123;</span><br><span class="line">        state.count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    evenOrOdd(state:<span class="built_in">any</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.count % <span class="number">2</span> === <span class="number">0</span> ? <span class="string">'even'</span> : <span class="string">'odd'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h4 id="getters-mutations-actions를-독립적으로-테스트하기"><a href="#getters-mutations-actions를-독립적으로-테스트하기" class="headerlink" title="getters, mutations, actions를 독립적으로 테스트하기"></a>getters, mutations, actions를 독립적으로 테스트하기</h4><p>독립적으로 테스트 하는 경우에는 좀더 상세하게 테스트를 진행할수 있다. 테스트가 실패하더라도 어디에서 실패했는지 찾기가 쉽다. 단점으로는 commit, dispatch같은 Vuex의 함수들을 mock 해야할 필요가 있다. 이는 유닛 테스트는 성공할지라도 mock이 정확하지 않기 때문에 실제 production 코드는 실패할수도 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">'../mutations'</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'"increment" increments "state.count" by 1'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> state = &#123; count: <span class="number">1</span> &#125;;</span><br><span class="line">    mutations.increment(state);</span><br><span class="line">    expect(state.count).toBe(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">'../getters'</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'"evenOrOdd" returns even if "state.count" is even'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> state = &#123; count: <span class="number">2</span> &#125;;</span><br><span class="line">    expect(getters.evenOrOdd(state)).toBe(<span class="string">'even'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test(<span class="string">'"evenOrOdd" returns odd if "state.count" is odd'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> state = &#123; count: <span class="number">1</span> &#125;;</span><br><span class="line">    expect(getters.evenOrOdd(state)).toBe(<span class="string">'odd'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br>

<h4 id="store를-사용한-테스트"><a href="#store를-사용한-테스트" class="headerlink" title="store를 사용한 테스트"></a>store를 사용한 테스트</h4><p>실제로 Vuex sotre를 사용한 방법이다. 이 테스트의 장점은 Vuex function들을 mock 할 필요가 없다는 것이다. 하지만 테스트 실패시에 어디에서 문제가 발생했는지 찾기가 어렵다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">'./mutations'</span>;</span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">'./getters'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mutations,</span><br><span class="line">    getters</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createLocalVue &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> storeConfig <span class="keyword">from</span> <span class="string">'../store-config'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; cloneDeep &#125; <span class="keyword">from</span> <span class="string">'lodash'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = createLocalVue();</span><br><span class="line"><span class="keyword">let</span> store:<span class="built_in">any</span>;</span><br><span class="line">localVue.use(Vuex);</span><br><span class="line"></span><br><span class="line">beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    store = <span class="keyword">new</span> Vuex.Store(cloneDeep(storeConfig));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test(<span class="string">'increments "count" value when "increment" is committed'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    expect(store.state.count).toBe(<span class="number">0</span>);</span><br><span class="line">    store.commit(<span class="string">'increment'</span>);</span><br><span class="line">    expect(store.state.count).toBe(<span class="number">1</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">test(<span class="string">'updates "evenOrOdd" getter when "increment" is committed'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    expect(store.getters.evenOrOdd).toBe(<span class="string">'even'</span>);</span><br><span class="line">    store.commit(<span class="string">'increment'</span>);</span><br><span class="line">    expect(store.getters.evenOrOdd).toBe(<span class="string">'odd'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>해당 테스트에서는 cloneDeep를 사용하고 있는데 이는 각 테스트에 store를 클린하게 사용하기 위해서 이다.</p>
<p>그리고 생각해 보았을 때 상황에 맞추어서 하나씩만 적용 하던가 아니면 두개 모두를 적용해서 테스트 코드를 작성 하면 좋을거 같다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/14/vuex-test-md/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/13/vue-router-test/"
                            aria-label=": Vue 라우터 테스트"
                        >
                            Vue 라우터 테스트
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-13T17:14:15+09:00">
	
		    Mar 13, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/vue-test-utils/">vue-test-utils</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="vue-라우터-테스트-시에-주의-할점"><a href="#vue-라우터-테스트-시에-주의-할점" class="headerlink" title="vue 라우터 테스트 시에 주의 할점"></a>vue 라우터 테스트 시에 주의 할점</h2><p>vue 라우터를 테스트 할 시에 global Vue에 직접 추가를 해서는 안된다. vue 라우터를 설치 할 경우에는 $route와 $router가 vue 프로퍼티에 추가되어진다. 이는 $route와 $router를 mock 해서 테스트 하는 경우에 테스트를 실패하게 만든다.<br>vue-test-utils에서 제공하는 createLocalVue을 사용하는 것을 권장한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount, createLocalVue &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = createLocalVue()</span><br><span class="line">localVue.use(VueRouter)</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter()</span><br><span class="line"></span><br><span class="line">shallowMount(Component, &#123;</span><br><span class="line">    localVue,</span><br><span class="line">    router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<br>

<h2 id="router-link-router-view를-사용하는-컴포넌트-테스트-하기"><a href="#router-link-router-view를-사용하는-컴포넌트-테스트-하기" class="headerlink" title="router-link, router-view를 사용하는 컴포넌트 테스트 하기"></a>router-link, router-view를 사용하는 컴포넌트 테스트 하기</h2><p>위 두가지 컴포넌트를 사용하는 컴포넌트를 테스트 하는 방법은 두가지가 존재한다.</p>
<br>

<h4 id="1-stubs-사용하기"><a href="#1-stubs-사용하기" class="headerlink" title="1. stubs 사용하기"></a>1. stubs 사용하기</h4><p>stubs를 사용해서 자식 컴포넌트를 렌더링하는 것을 피한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"></span><br><span class="line">shallowMount(Component, &#123;</span><br><span class="line">    stubs: [<span class="string">'router-link'</span>, <span class="string">'router-view'</span>]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br>

<h4 id="2-localVue를-사용하기"><a href="#2-localVue를-사용하기" class="headerlink" title="2. localVue를 사용하기"></a>2. localVue를 사용하기</h4><p>localVue를 이용해서 실제로 VueRouoter를 추가하는 방식이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount, createLocalVue &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = createLocalVue();</span><br><span class="line">localVue.use(VueRouter);</span><br><span class="line"></span><br><span class="line">shallowMount(Component, &#123;</span><br><span class="line">    localVue</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<br>

<h2 id="route-router-mock-하기"><a href="#route-router-mock-하기" class="headerlink" title="$route, $router mock 하기"></a>$route, $router mock 하기</h2><p>$route, $router 객체를 가지고 컴포넌트 테스트를 해야 할 경우가 있다. 이때는 $route, $router를 mock 하여 사용한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> $route = &#123;</span><br><span class="line">    path: <span class="string">'/some/path'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = shallowMount(Component, &#123;</span><br><span class="line">    mocks: &#123;</span><br><span class="line">        $route</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">wrapper.vm.$route.path  <span class="comment">// 이렇게 접근이 가능해진다.</span></span><br></pre></td></tr></table></figure>




                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/13/vue-router-test/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/13/typescript-vue-test/"
                            aria-label=": 타입스크립트로 vue 테스트 하기"
                        >
                            타입스크립트로 vue 테스트 하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-13T16:58:50+09:00">
	
		    Mar 13, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/jest/">jest</a>, <a class="category-link" href="/categories/javascript/TDD/jest/typescript/">typescript</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="데이터-테스트-하기"><a href="#데이터-테스트-하기" class="headerlink" title="데이터 테스트 하기"></a>데이터 테스트 하기</h2><p>js에서는 데이터를 검증 할때 아래와 같이 작성한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.vm.message).toBe(<span class="string">'message'</span>);</span><br></pre></td></tr></table></figure>

<p>ts에서도 위와 같은 코드를 작성한 후에 테스트를 돌리니 아래와 같은 에러가 발생하였다. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TypeScript diagnostics (customize using <span class="string">`[jest-config].globals.ts-jest.diagnostics`</span> option):</span><br><span class="line">    src/components/__tests__/HelloWorld.test.ts:<span class="number">12</span>:<span class="number">23</span> - error TS2339: Property <span class="string">'message'</span> does not exist on type <span class="string">'CombinedVueInstance&lt;Vue, object, object, object, Record&lt;never, any&gt;&gt;'</span>.</span><br></pre></td></tr></table></figure>

<p>그래서 정상적으로 테스트 하기 위한 방법은 두가지 정도 인거 같다.</p>
<br>

<h4 id="1-vm-data-사용하기"><a href="#1-vm-data-사용하기" class="headerlink" title="1. vm.$data 사용하기"></a>1. vm.$data 사용하기</h4><p>vm에는 data값을 가지고 있는 $data 객체가 존재한다. 해당 객체를 통해서 검증을 하면 가능하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.vm.$data.message).toBe(<span class="string">'message'</span>);</span><br></pre></td></tr></table></figure>

<br>

<h4 id="2-jest-config-js-수정하기"><a href="#2-jest-config-js-수정하기" class="headerlink" title="2. jest.config.js 수정하기"></a>2. jest.config.js 수정하기</h4><p>ts-jest를 사용하면 diagnostics옵션의 디폴트값이 true인데 위 코드 처럼 사용할 경우 에러를 발생시킨다. 이를 false로 설정하면 정상적으로 테스트가 가능하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line">    globals: &#123;</span><br><span class="line">      <span class="string">'ts-jest'</span>: &#123;</span><br><span class="line">        diagnostics: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/13/typescript-vue-test/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/12/vue-typescript-test/"
                            aria-label=": 뷰 타입스크립트로 사용할때 테스트를 위한 설치 방법"
                        >
                            뷰 타입스크립트로 사용할때 테스트를 위한 설치 방법
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-12T22:00:53+09:00">
	
		    Mar 12, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/jest/">jest</a>, <a class="category-link" href="/categories/javascript/TDD/jest/typescript/">typescript</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="타입스크립트를-사용할때-추가적으로-설치해야할-라이브러리"><a href="#타입스크립트를-사용할때-추가적으로-설치해야할-라이브러리" class="headerlink" title="타입스크립트를 사용할때 추가적으로 설치해야할 라이브러리"></a>타입스크립트를 사용할때 추가적으로 설치해야할 라이브러리</h2><p>뷰를 jest를 통해서 테스트 하고자 할때 설치해야할 라이브러리 목록은 <a href="https://suld2495.github.io/2020/03/06/vue-jest-error">here</a>를 통해서 확인이 가능하다.</p>
<ol>
<li>ts-jest</li>
<li>@types/jest</li>
</ol>
<h2 id="jest-config-js"><a href="#jest-config-js" class="headerlink" title="jest.config.js"></a>jest.config.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="string">"moduleFileExtensions"</span>: [</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="string">"ts"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"transform"</span>: &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      <span class="string">"^.+\\.tsx?$"</span>: <span class="string">"ts-jest"</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// jest는 기본적으로 js만을 테스트 파일로 찾기 때문에 .ts 파일도 테스트 파일로 찾을수 있도록 설정 해준다.</span></span><br><span class="line">    <span class="string">"testRegex"</span>: <span class="string">"(/__tests__/.*|(\\.|/)(test|spec))\\.(jsx?|tsx?)$"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h2><p>types에 jest를 추가해준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="string">"types"</span>: [</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            <span class="string">"jest"</span></span><br><span class="line">        ],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/12/vue-typescript-test/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/09/jest-setup/"
                            aria-label=": 테스트 Setup"
                        >
                            테스트 Setup
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-09T21:47:15+09:00">
	
		    Mar 09, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/jest/">jest</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><p>테스트 코드를 작성하다 보면 테스트마다 공통적으로 사용이 되는 코드가 존재한다. 그중에서 테스트 코드 로직을 실행 하기 이전에 실행이 되어야 하는 공통 코드가 있다. 이때는 사용되는 함수가 <code>beforeEach</code> 함수이다.<br>해당하는 함수는 각 테스트 코드가 실행되기 이전에 호출된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">beforeEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 보통 변수의 초기화 등의 코드가 들어가거나 테스트 코드 전에 실행되어야 할 로직이 들어간다.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="테스트-종료시-호출"><a href="#테스트-종료시-호출" class="headerlink" title="테스트 종료시 호출"></a>테스트 종료시 호출</h2><p>각 테스트가 종료 후에 호출이 되는 함수도 존재한다. 이는 <code>afterEach</code> 함수이다. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">afterEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 테스트 종류 후에 작업 해야 할 로직이 들어간다.</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/09/jest-setup/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/07/vue-test-utils-wrapper/"
                            aria-label=": Vue Test Utils의 Wrapper 객체"
                        >
                            Vue Test Utils의 Wrapper 객체
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-07T11:07:40+09:00">
	
		    Mar 07, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/vue/">vue</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="프로퍼티"><a href="#프로퍼티" class="headerlink" title="프로퍼티"></a>프로퍼티</h2><h4 id="1-vm"><a href="#1-vm" class="headerlink" title="1. vm"></a>1. vm</h4><p><code>vm</code>은 Vue 인스턴스이며, wrapper.vm으로 vm의 모든 메소드와 프로퍼티에 접근이 가능하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wrapper.vm.count;</span><br><span class="line">wrapper.vm.method();</span><br></pre></td></tr></table></figure>

<br>

<h2 id="메소드"><a href="#메소드" class="headerlink" title="메소드"></a>메소드</h2><h4 id="1-html"><a href="#1-html" class="headerlink" title="1. html"></a>1. html</h4><p>Wrapper DOM 노드의 HTML을 문자열로 반환을 해줍니다. 그래서 태그를 포함한 결과를 반환합니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.html()).toBe(<span class="string">'&lt;div&gt;&lt;/div&gt;'</span>);</span><br></pre></td></tr></table></figure>

<br>

<h4 id="2-text"><a href="#2-text" class="headerlink" title="2. text"></a>2. text</h4><p>Wrapper의 text만을 반환해줍니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.text()).toBe(<span class="string">'문자열'</span>);</span><br></pre></td></tr></table></figure>

<br>

<h4 id="3-find"><a href="#3-find" class="headerlink" title="3. find"></a>3. find</h4><p>선택자에 해당하는 DOM 노드 또는 해당하는 뷰 컴포넌트 중에 선번째 Wrapper를 반환해줍니다.</p>
<ul>
<li><p>Arguments:</p>
<ul>
<li>{string | Component} selector</li>
</ul>
</li>
<li><p>Returns: {Wrapper}</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wrapper.find(<span class="string">'div'</span>);</span><br><span class="line">wrapper.find(Component);</span><br></pre></td></tr></table></figure>
<br>

<h4 id="3-findAll"><a href="#3-findAll" class="headerlink" title="3. findAll"></a>3. findAll</h4><p>해당 하는 모든 Wrapper를 반환해줍니다.</p>
<ul>
<li><p>Arguments:</p>
<ul>
<li>{string | Component} selector</li>
</ul>
</li>
<li><p>Returns: {WrapperArray}</p>
</li>
</ul>
<br>

<h4 id="4-exists"><a href="#4-exists" class="headerlink" title="4. exists"></a>4. exists</h4><p>해당 Wrapper가 존재하는지 여부를 반환해줍니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.exists()).toBeTruthy();</span><br></pre></td></tr></table></figure>

<br>

<h4 id="5-contains"><a href="#5-contains" class="headerlink" title="5. contains"></a>5. contains</h4><p>Wrapper가 매칭되는 element 또는 컴포넌트를 포함하고 있는지 여부를 반환해줍니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">expect(wrapper.contains(<span class="string">'div'</span>)).toBeTruthy();</span><br><span class="line">expect(wrapper.contains(Component)).toBeFalsy();</span><br></pre></td></tr></table></figure>

<br>

<h4 id="6-setData"><a href="#6-setData" class="headerlink" title="6. setData"></a>6. setData</h4><p>data에 값을 할당 할수있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrapper.setData(&#123; data키:값 &#125;)</span><br></pre></td></tr></table></figure>

<br>

<h4 id="7-setProps"><a href="#7-setProps" class="headerlink" title="7. setProps"></a>7. setProps</h4><p>props에 값을 할당 할수있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrapper.setProps(&#123; prop키:값 &#125;)</span><br></pre></td></tr></table></figure>

<br>

<h4 id="8-trigger"><a href="#8-trigger" class="headerlink" title="8. trigger"></a>8. trigger</h4><p>trigger는 wrapper의 이벤트를 발동시켜줍니다. trigger는 추가적으로 option을 줄수 있습니다.<br>그리고 trigger의 결과를 테스트 할 때는 wrapper.vm.$nextTick를 이용하여 이벤트가 처리 된 후에 테스트 할수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wrapper.trigger(<span class="string">'click'</span>);</span><br><span class="line">wrapper.trigger(<span class="string">'click'</span>, &#123;</span><br><span class="line">    ctrlKey: <span class="literal">true</span>   <span class="comment">// @click.ctrl을 테스트 할수 있다.</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<br>

<h4 id="9-emitted"><a href="#9-emitted" class="headerlink" title="9. emitted"></a>9. emitted</h4><p>wrapper의 vm에 의해 발동되어진 커스텀 이벤트를 포함하는 객체를 반환해 줍니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wrapper.vm.$emit(<span class="string">'custom'</span>);</span><br><span class="line">wrapper.vm.$emit(<span class="string">'custom'</span>, <span class="number">123</span>);</span><br><span class="line">wrapper.emitted();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        custom: [[], [123]]</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/07/vue-test-utils-wrapper/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/06/vue-asynchronous/"
                            aria-label=": 뷰 비동기"
                        >
                            뷰 비동기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-06T21:30:32+09:00">
	
		    Mar 06, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/vue/">vue</a>, <a class="category-link" href="/categories/vue/vue-%ED%8C%81/">vue 팁</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="비동기-갱신-큐"><a href="#비동기-갱신-큐" class="headerlink" title="비동기 갱신 큐"></a>비동기 갱신 큐</h2><p>Vue는 비동기 적으로 DOM을 업데이트 합니다. 데이터의 변경이 발견 되면 큐를 열고 같은 이벤트 루프에서 발생한 변경된 모든 데이터를 버퍼에 담습니다. 같은 wather가 여러번 호출 되더라도 큐에서 한번만 푸시 됩니다. 이러한 동작은 불필요한 계산과 렌더링을 방지해줍니다. 그리고 다음 이벤트 루프인 “tick”에서 큐를 모두 비우고 실제 행동을 수행합니다.<br><br><br>예를 들어 <code>vm.someData = &#39;new value&#39;</code> 라고 설정 할때, Vue는 바로 렌더링을 수행하지 않고 큐가 비워진 후인 다음 “tick”에서 업데이트 됩니다. 대부분의 상황에서는 이러한 작업이 영향을 받지 않지만, DOM state가 업데이트 된 후 작업을 수행하려는 겨우 신경을 써야 할수 있습니다. 데이터가 변경 된 후, DOM에 업데이가 완료되는 것을 기다리려면 데이터가 변경된 직후에 Vue.nextTick(callback)을 사용하면 됩니다. 콜백은 DOM이 업데이트 된 후 호출이 됩니다. </p>
<br>

<h4 id="nextTick-사용하기"><a href="#nextTick-사용하기" class="headerlink" title="nextTick 사용하기"></a>nextTick 사용하기</h4><p>아래의 코드를 실행해보면 data가 변경 되더라도 실제로 바로 렌더링되지 않는 다는 것을 확인 할수 있습니다.<br>그리고 nextTic 메소드의 콜백함수가 DOM 업데이트가 완료 된 후 실행되었음을 확인할수 있습니다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example"</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#example'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        message: <span class="string">'123'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">vm.message = <span class="string">'new message'</span> </span><br><span class="line">vm.$el.textContent === <span class="string">'new message'</span>        <span class="comment">// false</span></span><br><span class="line">Vue.nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    vm.$el.textContent === <span class="string">'new message'</span>    <span class="comment">// true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://vuejs.org/v2/guide/reactivity.html를" target="_blank" rel="noopener">https://vuejs.org/v2/guide/reactivity.html를</a> 참조하였습니다.</p>
</blockquote>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/06/vue-asynchronous/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/06/vue-test-component/"
                            aria-label=": Vue 컴포넌트 테스트 하기"
                        >
                            Vue 컴포넌트 테스트 하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-06T20:59:52+09:00">
	
		    Mar 06, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/jest/">jest</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id=""><a href="#" class="headerlink" title=""></a></h2>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/06/vue-test-component/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/03/06/vue-jest-component/"
                            aria-label=": Vue Test Utils 이용한 컴포넌트 테스트"
                        >
                            Vue Test Utils 이용한 컴포넌트 테스트
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-03-06T20:41:54+09:00">
	
		    Mar 06, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/javascript/">javascript</a>, <a class="category-link" href="/categories/javascript/TDD/">TDD</a>, <a class="category-link" href="/categories/javascript/TDD/jest/">jest</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="new-Vue를-이용한-컴포넌트-테스트"><a href="#new-Vue를-이용한-컴포넌트-테스트" class="headerlink" title="new Vue를 이용한 컴포넌트 테스트"></a>new Vue를 이용한 컴포넌트 테스트</h2><p>아래의 방법은 실제로 컴포넌트를 생성하여 테스트 하는 방법입니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HelloWorld.js --&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;Hello&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// helloworld.test.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">'../components/HelloWorld.vue'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="function">(<span class="params"><span class="string">'HelloWorld'</span></span>), <span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    it(<span class="string">'new Vue를 이용한 테스트'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> helloWorld = <span class="keyword">new</span> Vue(HelloWorld).$mount();</span><br><span class="line">        <span class="keyword">const</span> message = <span class="string">'Hello'</span>;</span><br><span class="line">        expect(helloWorld.message).toBe(message);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Vue-Test-Utils-이용한-컴포넌트-테스트"><a href="#Vue-Test-Utils-이용한-컴포넌트-테스트" class="headerlink" title="Vue Test Utils 이용한 컴포넌트 테스트"></a>Vue Test Utils 이용한 컴포넌트 테스트</h2><p>Vue Test Utils에서 제공 하는 mount 함수를 이용해서 좀더 간편 하게 테스트를 할수 있습니다.<br>message에 접근 하기 위해서 vm 프로퍼티를 이용한다는게 다릅니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// helloworld.test.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">'@vue/test-utils'</span>;</span><br><span class="line"><span class="keyword">import</span> HelloWorld <span class="keyword">from</span> <span class="string">'../components/HelloWorld.vue'</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="function">(<span class="params"><span class="string">'HelloWorld'</span></span>), <span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    it(<span class="string">'new Vue를 이용한 테스트'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> wrapper = mount(HelloWorld);</span><br><span class="line">        <span class="keyword">const</span> message = <span class="string">'Hello'</span>;</span><br><span class="line">        expect(wrapper.vm.message).toBe(message);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/03/06/vue-jest-component/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/page/2/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 8</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Moon Star. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">Moon Star</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
